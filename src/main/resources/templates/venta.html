<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
        <meta http-equiv="Expires" content="0">
        <meta http-equiv="Last-Modified" content="0">
        <meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
        <meta http-equiv="Pragma" content="no-cache">

        <title>FOOD - Venta</title>

        <link href="../static/css/todo.css" th:href="@{/css/todo.css}" rel="stylesheet" type="text/css">
        <link href="../static/css/venta.css" th:href="@{/css/venta.css}" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <link href="../static/imgs/icono-2.ico" th:href="@{/imgs/icono-2.ico}" rel="shortcut icon">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <!--Este JS utiliza funciones de JQuery, por lo que se debe de importar despues de este-->
        <script type="text/javascript" src="../static/js/venta.js" th:src="@{'/js/venta.js'}"></script>
	</head>
    <body>
    <nav th:replace="fragments.html :: nav"></nav>

    <span th:if="${result==0}"> <script>alert("Funciono");</script></span>
        <div class="container">
        	<b class="titulo">Venta de alimentos</b>
			<div class="rol">
				<a href="#">
					<img class="icon" src="/imgs/logout.png" th:src="@{/imgs/logout.png}">
				</a>
				<b>Gerente</b>
			</div>
            <hr size=4 color="#CCCCCC">

            <form action="#" th:action="@{/venta/addCliente}" th:object="${clienteModel}" method="post" onsubmit="return validar()">
            	Número de teléfono:
            	<input id="telefono" type="number" size="20" th:field="*{telefono}" th:value="${telefono}" placeholder="1112223344" maxlength="10">
                <button class="yellow" type="submit" size="20" name="action" value="buscar">Buscar</button>
                <div class="registrar">
                	<b>¿Cliente nuevo?</b>
                    <button class="yellow" type="submit" size="20" name="action" value="registrar" onclick="validar()">¡Registralo!</button>
                </div><br>
                Nombre del cliente:
                <input id="nombre" type="text" class="nom" th:field="*{nombre}" th:value="${nombre}" placeholder="Nombre(s)">
                <input id="apellido" type="text" class="app" th:field="*{apellidos}" th:value="${apellidos}" placeholder="Apellido(s)"><br>
                Dirección:
                <input id="dir" type="text" class="dir" th:field="*{direccion}" th:value="${direccion}" placeholder="Calle, Número, Colonia"><br>
                Correo:
                <input id="correo" type="text" class="dir" th:field="*{correo}" th:value="${correo}" placeholder="usuario@dominio"><br>
                Puntos:
                <input type="number" th:field="*{puntos}" th:value="${puntos}" readonly>
                RFC:
                <input id="rfc" type="text" th:field="*{RFC}" th:value="${RFC}" placeholder="XXXX000000" maxlength="15"><br>

                <!--
                <script>
                    function validar() {
                        var telefono, nombre, apellido, dir, correo, rfc, rfcConv;
                        telefono = document.getElementById("telefono").value;
                        nombre = document.getElementById("nombre").value;
                        apellido = document.getElementById("apellido").value;
                        dir = document.getElementById("dir").value;
                        rfc = document.getElementById("rfc").value;
                        rfcConv=rfc.toUpperCase();
                        rfcChar= rfc.charAt(0);
                        rfcChar1=rfc.charAt(1);
                        rfcChar2=rfc.charAt(2);

                        /*if (isDigit(rfcChar)||isDigit(rfcChar1)||isDigit(rfcChar2)){
                            alert("los primero 3 caracteres deben ser letras")
                           return false;
                        }*/
                        if(rfc!=rfcConv){
                            alert("RFC debe ser en mayusculas")
                            return false;
                        }

                        if(rfc.length>13 || rfc.length<12){
                            alert("formato de RFC incorrecto")
                            return false;
                        }

                        if (telefono!=""||nombre!=""||apellido!=""||dir!=""||correo!=""||rfc!=""||rfc.length>=12 && rfc.length<=13){
                            alert("agregado exitosamente" );
                            return true;
                        }
                    }
                </script>
                -->
            </form>

            <form>
                <hr size=4 color="#CCCCCC">
                DETALLES DE LA ORDEN
                <hr size=4 color="#CCCCCC">
                <!--
                <aside>
                	<table>
                		<thead>
                    		RESUMEN DE LA ORDEN <img class="list" src="/imgs/check-list.png" th:src="@{/imgs/check-list.png}">
                    	</thead>
                    	<hr size=4 color="#CCCCCC">
                    	<tbody>
                    		<tr>
                    			<th>Cant</th>
                            	<th>Descripción</th>
                            	<th>Precio</th>
                            	<th>Total</th>
                                <th></th>
                        	</tr>
                        	<tr>
                        		<td>2</td>
                            	<td>Rebanada Peperonni</td>
                            	<td>40.00</td>
                            	<td>80.00</td>
                                <td><img class="cross" src="/imgs/cancel.png" th:src="@{/imgs/cancel.png}"><td>
                        	</tr>
                        	<tr>
                        		<td>1</td>
                            	<td>Pasta Alfredo</td>
                            	<td>80.00</td>
                            	<td>80.00</td>
                                <td><img class="cross" src="/imgs/cancel.png" th:src="@{/imgs/cancel.png}"><td>
                        	</tr>
                            <tr>
                            	<td>1</td>
                                <td>
                                	<i>Dúo 2 X 1</i><br>
                                    Personal carnes<br>
                                    Agua del día
                                </td>
                                <td>100.00</td>
                                <td>100.00</td>
                                <td><img class="cross" src="/imgs/cancel.png" th:src="@{/imgs/cancel.png}"><td>
                            </tr>
                    	</tbody>
                    	<tr>
                        	<td></td>
                           	<td></td>
                           	<td>Total</td>
                           	<td>$120.00</td>
                        </tr>
                	</table>
                </aside>
                -->
            </form>

            <!--AÑADIR ALIMENTO A LA LISTA DE COMPRA-->
            <img class="cat" src="/imgs/dishes.png" th:src="@{/imgs/dishes.png}">
            Alimentos
            <br>
            <select id="selectAlimento">
                <option th:each="alimento : ${alimentos}" th:value="${alimento.id}" th:text="${alimento.nombre + ' ' + alimento.tamano}"></option>
            </select>
            <br>
            <input class="agregar" type="submit" value="Agregar alimento" id="addAlimento" onClick="addAlimento()">
            <br><br>

            <!--AÑADIR PROMOCION A LA LISTA DE COMPRA-->
            <img class="cat" src="/imgs/discount.png" th:src="@{/imgs/discount.png}">
            Promociones
            <br>
            <select id="selectPromocion">
                <option th:each="promocion : ${promociones}" th:value="${promocion.id}" th:text="${promocion.nombre}"></option>
            </select>
            <input class="agregar" type="submit" value="Agregar promoción" id="addPromocion" onClick="findPromocion()">
            <br><br>

            <form action="#" th:action="@{/venta/addVenta}" th:object="${reciboModel}" method="post">
                <table>
                    <tbody>
                    <!--<tr>
                        <th>Código</th>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Precio Unitario</th>
                        <th>Importe</th>
                        <th></th>
                    </tr>
                    <tr>
                        <td>
                            <input class="precio" type="number">
                        </td>
                        <td>
                            <input class="venta" type="text">
                        </td>
                        <td>
                            <input class="precio" type="number">
                        </td>
                        <td>
                            <input class="show_precio" type="number" readonly>
                        </td>
                        <td>
                            <input class="show_precio" type="number" readonly>
                        </td>
                        <td>
                            <img class="cross" src="/imgs/cancel.png" th:src="@{/imgs/cancel.png}">
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="total">Total: $</td>
                        <td>100.00</td>
                    </tr>-->
                    <tr>
                        <td colspan="3">
                            <img class="cat" src="/imgs/food.png" th:src="@{/imgs/food.png}">
                            <br>
                            Elija el tipo de orden:
                            <br>
                            <input type="radio" name="orden" value="L" th:field="*{tipoOrden}" required>Local
                            <input type="radio" name="orden" value="D" th:field="*{tipoOrden}">Domicilio
                        </td>
                        <td colspan="3">
                            <img class="cat" src="/imgs/debit-card.png" th:src="@{/imgs/debit-card.png}">
                            <br>
                            Elija el método de pago:
                            <br>
                            <input type="radio" name="metodo" value="E" th:field="*{metodoPago}" required>Efectivo
                            <input type="radio" name="metodo" value="T" th:field="*{metodoPago}">Tarjeta
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">

                        </td>
                        <td colspan="3">
                            Marca la casilla si el cliente requiere cambio
                            <input type="checkbox" name="cambio" value="1">
                            <br>
                            Cantidad de cambio: $
                            <input class="precio" type="number" name="dinero">
                        </td>
                    </tr>
                    </tbody>
                </table>
                <input class="green" type="submit" value="Finalizar compra">
                <input class="red" type="submit" value="Cancelar compra">
            </form>
        </div>
    </body>
</html>
